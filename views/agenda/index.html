{{right_sidebar_enabled=False}}
{{extend 'layout.html'}}
{{room_count = symp.room.count()}}
<style>
table, tr, td, th{
    border: 1px solid black;
}
tr:nth-child(odd)    { background-color:#eee; }
tr:nth-child(even)    { background-color:#fff; }
</style>
<table border=1>
    <tr>
        <th width="10%">Time</th>
        {{for room in symp.room.select(db.room.name, orderby=db.room.name):}}
            <th width="{{=90/room_count}}%">{{=room.name}}</th> 
        {{pass}}
    </tr>
{{for block in timeblocks:}}
    <tr>
        <td>{{=block.start_time.strftime(TIME_FORMAT)}}<br><span style="font-size: 80%">{{=block.desc}}</span></td>
        {{for session in db(
                            (db.session.timeblock == block.id) &
                            (db.room.id == db.session.room)
                         ).select(db.session.id, db.session.name, db.session.theme, orderby=db.room.name):}}
         <td>
             <div style="font-weight: bold; text-decoration: underline; text-align: center;">{{=session.name}}</div>
             {{=session.theme}}
             <ul>
             {{for paper in db(db.paper.session == session.id).select():}}
             {{=LI(A(paper.title, _href=URL("papers","view",args=paper.id)))}}
             {{pass}}
             </ul>
         </td>
                         
        {{pass}}
    </tr>
{{pass}}
</table>
{{#=BEAUTIFY(response._vars)}}
