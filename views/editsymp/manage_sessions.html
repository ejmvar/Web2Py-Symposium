{{right_sidebar_enabled=False}}
{{extend 'editsymp/layout.html'}}
<h1>Manage Sessions</h1>
<style>
table, tr, td, th{
    border: 1px solid black;
}
tr:nth-child(odd)    { background-color:#eee; }
tr:nth-child(even)    { background-color:#fff; }
</style>


{{room_count = symp.room.count()}}

<table border=1>
    <tr>
        <th width="10%">Time</th>
        {{for room in symp.room.select(db.room.name, orderby=db.room.name):}}
            <th width="{{=90/room_count}}%">{{=room.name}}</th> 
        {{pass}}
    </tr>
{{for block in timeblocks:}}
    <tr>
        <td>{{=block.start_time.strftime(TIME_FORMAT)}}<br><span style="font-size: 80%">{{=block.desc}}</span></td>
        {{for session_lookup in db(
                            (db.session.timeblock == block.id) &
                            (db.room.id == db.session.room)
                         ).select(db.session.id, db.session.name, db.session.theme, orderby=db.room.name):}}
         <td id="session_{{=session_lookup.id}}">
         {{=A("Edit Session", _href=URL("edit_session", args=session_lookup.id))}}
        {{=A("Edit Judges", _href=URL("edit_session_judges", args=session_lookup.id))}}
             <div style="font-weight: bold; text-decoration: underline; text-align: center;">{{=session_lookup.name}}</div>
             {{=session_lookup.theme}}
         </td>
                         
        {{pass}}
    </tr>
{{pass}}
</table>





<h1>Create New Session</h1>
{{=form}}
