{{extend 'layout.html'}}
{{include 'blocks/paper_block.html'}}
{{show_discription=show_action_buttons=False}}

{{show_moderation = c_show_moderation}}


<h1>{{=T("Papers")}}</h1>
{{if auth.has_membership("Symposium Admin"):}}
    {{if not c_show_moderation:}}
        {{=A(T("Goto Admin Mode (View All Papers, including incomplete papers)"), _href=URL('admin_index', args=request.args))}}
    {{else:}}
        {{=A(T("Goto Normal Mode (View only approved papers)"), _href=URL('index', args=request.args))}}
    {{pass}}
{{pass}}
{{if ret:}}
    {{for data in ret:}}
        {{if all:}}
            {{=H1(A(db.symposium._format % data['symposium'], _href=URL(args=data['symposium'].sid)))}}
        {{else:}}
            {{=H1(db.symposium._format % data['symposium'])}}
        {{pass}}
    
        {{=P("%d papers approved, %d papers pending" % (data['approved'], data['pending']))}}
        {{if data['symposium'].event_date < request.now.date() and all:}}
            {{=A(T('This symposium has passed, Show Papers'),
                 _href="#",
                 _onclick="$('#symp_paper_%d').show('slow'); $(this).hide(); return false;" % data['symposium'].id)}}
    
            <div id="symp_paper_{{=data['symposium'].id}}" style="display: none;">
        {{else:}}
            <div id="symp_paper_{{=data['symposium'].id}}">
        {{pass}}
        {{if data['papers']:}}
            {{for paper in data['papers']:}}
                {{paper_block()}}
            {{pass}}
        {{else:}}
            {{=T("No approved papers at this time")}}
        {{pass}}
        </div>
    {{pass}}
{{else:}}
    {{=P(T("No Symposiums at this time."))}}
{{pass}}
